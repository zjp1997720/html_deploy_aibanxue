<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¦‚è§ˆ - HTML-GO ç®¡ç†åå°</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="HTML-GO ç®¡ç†åå°">
  <meta name="robots" content="noindex, nofollow">
  
  <!-- Favicons -->
  <link rel="icon" href="/icon/web/favicon.ico">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter+Display:wght@400;500;600;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Styles -->
  <link rel="stylesheet" href="/css/design-system.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/utilities.css">
  <link rel="stylesheet" href="/css/mobile-optimizations.css">
  
  <!-- Theme Script -->
  <script>
    const theme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);
  </script>
</head>
<body>
  <div id="app" class="min-h-screen bg-secondary">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="sticky top-0 z-40 bg-elevated border-b border-primary shadow-sm">
      <div class="px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <!-- å·¦ä¾§ï¼šLogoå’Œå¯¼èˆª -->
          <div class="flex items-center gap-8">
            <!-- Logo -->
            <div class="flex items-center gap-3">
              <div class="text-2xl">ğŸš€</div>
              <h1 class="text-lg font-display font-semibold text-primary">
                HTML-GO <span class="text-sm text-tertiary font-normal">Admin</span>
              </h1>
            </div>
            
            <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
            <button 
              id="mobile-menu-btn"
              class="md:hidden btn btn-ghost btn-sm btn-icon"
              aria-label="æ‰“å¼€èœå•"
            >
              <i class="fas fa-bars"></i>
            </button>
            
            <!-- æ¡Œé¢ç«¯å¯¼èˆª -->
            <nav class="hidden md:flex items-center gap-1">
              <a href="/admin/dashboard" class="nav-link active">
                <i class="fas fa-chart-line mr-2"></i>
                æ¦‚è§ˆ
              </a>
              <a href="/admin/pages" class="nav-link">
                <i class="fas fa-file-alt mr-2"></i>
                é¡µé¢ç®¡ç†
              </a>
              <a href="/admin/apikeys" class="nav-link">
                <i class="fas fa-key mr-2"></i>
                API Keys
              </a>
            </nav>
          </div>
          
          <!-- å³ä¾§ï¼šå·¥å…·æ  -->
          <div class="flex items-center gap-3">
            <!-- å¿«æ·æ“ä½œ -->
            <a 
              href="/" 
              target="_blank"
              class="hidden sm:flex btn btn-ghost btn-sm tooltip"
              data-tooltip="æŸ¥çœ‹å‰å°"
            >
              <i class="fas fa-external-link-alt mr-2"></i>
              å‰å°
            </a>
            
            <!-- ä¸»é¢˜åˆ‡æ¢ -->
            <button 
              id="theme-toggle" 
              class="btn btn-ghost btn-sm btn-icon tooltip"
              data-tooltip="åˆ‡æ¢ä¸»é¢˜"
            >
              <i class="fas fa-sun" id="theme-icon"></i>
            </button>
            
            <!-- åˆ†éš”çº¿ -->
            <div class="w-px h-6 bg-border-primary"></div>
            
            <!-- ç”¨æˆ·èœå• -->
            <div class="relative" id="user-menu">
              <button 
                class="flex items-center gap-2 p-2 rounded-lg hover:bg-surface-hover transition-colors"
                id="user-menu-btn"
              >
                <div class="w-8 h-8 bg-brand-600 text-white rounded-full flex items-center justify-center text-sm font-medium">
                  A
                </div>
                <span class="hidden sm:block text-sm font-medium text-primary">ç®¡ç†å‘˜</span>
                <i class="fas fa-chevron-down text-xs text-tertiary"></i>
              </button>
              
              <!-- ä¸‹æ‹‰èœå• -->
              <div 
                id="user-dropdown"
                class="absolute right-0 top-full mt-1 w-48 bg-elevated border border-primary rounded-lg shadow-lg hidden z-50"
              >
                <div class="p-2">
                  <a href="/admin/settings" class="dropdown-item">
                    <i class="fas fa-cog mr-2"></i>
                    ç³»ç»Ÿè®¾ç½®
                  </a>
                  <div class="divider my-2"></div>
                  <a href="/logout" class="dropdown-item text-error-600">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    é€€å‡ºç™»å½•
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    
    <!-- ç§»åŠ¨ç«¯ä¾§è¾¹æ é®ç½© -->
    <div 
      id="mobile-overlay"
      class="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden hidden"
    ></div>
    
    <!-- ç§»åŠ¨ç«¯ä¾§è¾¹æ  -->
    <aside 
      id="mobile-sidebar"
      class="fixed left-0 top-16 bottom-0 w-64 bg-elevated border-r border-primary transform -translate-x-full transition-transform z-40 md:hidden"
    >
      <nav class="p-4 space-y-2">
        <a href="/admin/dashboard" class="mobile-nav-link active">
          <i class="fas fa-chart-line mr-3"></i>
          æ¦‚è§ˆ
        </a>
        <a href="/admin/pages" class="mobile-nav-link">
          <i class="fas fa-file-alt mr-3"></i>
          é¡µé¢ç®¡ç†
        </a>
        <a href="/admin/apikeys" class="mobile-nav-link">
          <i class="fas fa-key mr-3"></i>
          API Keys
        </a>
        <div class="divider my-4"></div>
        <a href="/" target="_blank" class="mobile-nav-link">
          <i class="fas fa-external-link-alt mr-3"></i>
          æŸ¥çœ‹å‰å°
        </a>
      </nav>
    </aside>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="px-4 sm:px-6 lg:px-8 py-8">
      <!-- é¡µé¢æ ‡é¢˜ -->
      <div class="mb-8">
        <h2 class="text-2xl font-display font-semibold text-primary mb-2">
          <i class="fas fa-chart-line mr-3 text-brand-600"></i>
          ç³»ç»Ÿæ¦‚è§ˆ
        </h2>
        <p class="text-secondary">æŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œå…³é”®æŒ‡æ ‡</p>
      </div>
      
      <!-- ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼ -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- æ€»é¡µé¢æ•° -->
        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-tertiary mb-1">æ€»é¡µé¢æ•°</p>
              <p class="text-2xl font-bold text-primary"><%= pages.length %></p>
            </div>
            <div class="stat-card-icon bg-brand-100 text-brand-600">
              <i class="fas fa-file-alt"></i>
            </div>
          </div>
        </div>
        
        <!-- å—ä¿æŠ¤é¡µé¢ -->
        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-tertiary mb-1">å—ä¿æŠ¤é¡µé¢</p>
              <p class="text-2xl font-bold text-primary"><%= pages.filter(p => p.is_protected).length %></p>
            </div>
            <div class="stat-card-icon bg-warning-50 text-warning-600">
              <i class="fas fa-shield-alt"></i>
            </div>
          </div>
        </div>
        
        <!-- å…¬å¼€é¡µé¢ -->
        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-tertiary mb-1">å…¬å¼€é¡µé¢</p>
              <p class="text-2xl font-bold text-primary"><%= pages.filter(p => !p.is_protected).length %></p>
            </div>
            <div class="stat-card-icon bg-success-50 text-success-600">
              <i class="fas fa-globe"></i>
            </div>
          </div>
        </div>
        
        <!-- ä»Šæ—¥åˆ›å»º -->
        <div class="stat-card">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-tertiary mb-1">ä»Šæ—¥åˆ›å»º</p>
              <p class="text-2xl font-bold text-primary">-</p>
            </div>
            <div class="stat-card-icon bg-error-50 text-error-600">
              <i class="fas fa-plus-circle"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- å†…å®¹åŒºåŸŸ -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- æœ€è¿‘é¡µé¢ -->
        <div class="lg:col-span-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">æœ€è¿‘åˆ›å»ºçš„é¡µé¢</h3>
              <a href="/admin/pages" class="btn btn-outline btn-sm">
                <i class="fas fa-external-link-alt mr-2"></i>
                æŸ¥çœ‹å…¨éƒ¨
              </a>
            </div>
            <div class="card-body p-0">
              <% if (pages.length > 0) { %>
                <div class="overflow-x-auto">
                  <table class="admin-table">
                    <thead>
                      <tr>
                        <th>é¡µé¢ä¿¡æ¯</th>
                        <th>ç±»å‹</th>
                        <th>çŠ¶æ€</th>
                        <th>åˆ›å»ºæ—¶é—´</th>
                        <th>æ“ä½œ</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% pages.slice(0, 5).forEach(function(page) { %>
                        <tr>
                          <td>
                            <div class="flex items-center gap-3">
                              <div class="w-10 h-10 bg-brand-100 text-brand-600 rounded-lg flex items-center justify-center text-sm font-medium">
                                <i class="fas fa-file-alt"></i>
                              </div>
                              <div>
                                <p class="font-medium text-primary truncate max-w-48">
                                  <%= page.name || 'HTML-' + page.id %>
                                </p>
                                <p class="text-xs text-tertiary font-mono">
                                  ID: <%= page.id %>
                                </p>
                              </div>
                            </div>
                          </td>
                          <td>
                            <span class="badge badge-<%= page.code_type === 'html' ? 'primary' : page.code_type === 'markdown' ? 'secondary' : 'success' %>">
                              <%= page.code_type.toUpperCase() %>
                            </span>
                          </td>
                          <td>
                            <% if (page.is_protected) { %>
                              <span class="inline-flex items-center gap-1 px-2 py-1 bg-warning-50 text-warning-700 text-xs font-medium rounded-md">
                                <i class="fas fa-lock text-xs"></i>
                                å—ä¿æŠ¤
                              </span>
                            <% } else { %>
                              <span class="inline-flex items-center gap-1 px-2 py-1 bg-success-50 text-success-700 text-xs font-medium rounded-md">
                                <i class="fas fa-globe text-xs"></i>
                                å…¬å¼€
                              </span>
                            <% } %>
                          </td>
                          <td>
                            <time class="text-sm text-secondary" datetime="<%= page.created_at %>">
                              <%= formatDate(page.created_at) %>
                            </time>
                          </td>
                          <td>
                            <div class="flex items-center gap-1">
                              <a 
                                href="/view/<%= page.id %>" 
                                target="_blank" 
                                class="btn btn-ghost btn-sm btn-icon tooltip"
                                data-tooltip="æŸ¥çœ‹é¡µé¢"
                              >
                                <i class="fas fa-eye"></i>
                              </a>
                              <button 
                                onclick="copyPageUrl('<%= page.id %>')" 
                                class="btn btn-ghost btn-sm btn-icon tooltip"
                                data-tooltip="å¤åˆ¶é“¾æ¥"
                              >
                                <i class="fas fa-copy"></i>
                              </button>
                            </div>
                          </td>
                        </tr>
                      <% }); %>
                    </tbody>
                  </table>
                </div>
              <% } else { %>
                <div class="flex flex-col items-center justify-center py-12">
                  <div class="w-16 h-16 bg-neutral-100 text-neutral-400 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-file-alt text-2xl"></i>
                  </div>
                  <h3 class="text-lg font-medium text-primary mb-2">è¿˜æ²¡æœ‰é¡µé¢</h3>
                  <p class="text-secondary text-center mb-6">åˆ›å»ºç¬¬ä¸€ä¸ªé¡µé¢å¼€å§‹ä½¿ç”¨å§ï¼</p>
                  <a href="/" class="btn btn-primary">
                    <i class="fas fa-plus mr-2"></i>
                    åˆ›å»ºé¡µé¢
                  </a>
                </div>
              <% } %>
            </div>
          </div>
        </div>
        
        <!-- å¿«æ·æ“ä½œ -->
        <div class="space-y-6">
          <!-- å¿«æ·æ“ä½œå¡ç‰‡ -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">å¿«æ·æ“ä½œ</h3>
            </div>
            <div class="card-body">
              <div class="space-y-3">
                <a href="/" target="_blank" class="btn btn-outline w-full justify-start">
                  <i class="fas fa-plus mr-3 text-brand-600"></i>
                  <div class="text-left">
                    <div class="font-medium">åˆ›å»ºé¡µé¢</div>
                    <div class="text-xs text-tertiary">å¿«é€Ÿåˆ›å»ºæ–°çš„åˆ†äº«é¡µé¢</div>
                  </div>
                </a>
                
                <a href="/admin/pages" class="btn btn-outline w-full justify-start">
                  <i class="fas fa-file-alt mr-3 text-success-600"></i>
                  <div class="text-left">
                    <div class="font-medium">ç®¡ç†é¡µé¢</div>
                    <div class="text-xs text-tertiary">æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰é¡µé¢</div>
                  </div>
                </a>
                
                <a href="/admin/apikeys" class="btn btn-outline w-full justify-start">
                  <i class="fas fa-key mr-3 text-warning-600"></i>
                  <div class="text-left">
                    <div class="font-medium">API ç®¡ç†</div>
                    <div class="text-xs text-tertiary">ç®¡ç†APIå¯†é’¥å’Œæƒé™</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
          
          <!-- ç³»ç»ŸçŠ¶æ€ -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">ç³»ç»ŸçŠ¶æ€</h3>
            </div>
            <div class="card-body">
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-success-500 rounded-full"></div>
                    <span class="text-sm font-medium">æœåŠ¡çŠ¶æ€</span>
                  </div>
                  <span class="text-sm text-success-600 font-medium">è¿è¡Œä¸­</span>
                </div>
                
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-success-500 rounded-full"></div>
                    <span class="text-sm font-medium">æ•°æ®åº“</span>
                  </div>
                  <span class="text-sm text-success-600 font-medium">æ­£å¸¸</span>
                </div>
                
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-warning-500 rounded-full"></div>
                    <span class="text-sm font-medium">å­˜å‚¨ç©ºé—´</span>
                  </div>
                  <span class="text-sm text-warning-600 font-medium">è‰¯å¥½</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- Toastå®¹å™¨ -->
  <div id="toast-container" class="fixed top-20 right-6 z-50 space-y-2"></div>
  
  <!-- é€šç”¨æ ·å¼ -->
  <style>
    /* å¯¼èˆªé“¾æ¥æ ·å¼ */
    .nav-link {
      padding: var(--space-3);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      font-weight: var(--font-weight-medium);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      text-decoration: none;
      transition: var(--duration-200) var(--easing-standard);
      transition-property: color, background-color;
    }
    
    .nav-link:hover {
      color: var(--text-primary);
      background-color: var(--surface-hover);
    }
    
    .nav-link.active {
      background-color: var(--brand-600);
      color: var(--neutral-0);
    }
    
    .nav-link.active:hover {
      background-color: var(--brand-700);
    }
    
    /* ç§»åŠ¨ç«¯å¯¼èˆªé“¾æ¥ */
    .mobile-nav-link {
      display: block;
      padding: var(--space-3);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      font-weight: var(--font-weight-medium);
      color: var(--text-secondary);
      text-decoration: none;
      transition: var(--duration-200) var(--easing-standard);
      transition-property: color, background-color;
    }
    
    .mobile-nav-link:hover {
      color: var(--text-primary);
      background-color: var(--surface-hover);
    }
    
    .mobile-nav-link.active {
      background-color: var(--brand-600);
      color: var(--neutral-0);
    }
    
    /* ä¸‹æ‹‰èœå•é¡¹ */
    .dropdown-item {
      display: block;
      padding: var(--space-3);
      font-size: var(--text-sm);
      color: var(--text-secondary);
      text-decoration: none;
      border-radius: var(--radius-md);
      transition: var(--duration-200) var(--easing-standard);
      transition-property: color, background-color;
    }
    
    .dropdown-item:hover {
      color: var(--text-primary);
      background-color: var(--surface-hover);
    }
    
    /* è¡¨æ ¼æ ·å¼å¢å¼º */
    .admin-table {
      width: 100%;
      background-color: var(--bg-elevated);
      border-collapse: collapse;
    }
    
    .admin-table th {
      padding: var(--space-4) var(--space-6);
      text-align: left;
      font-size: var(--text-xs);
      font-weight: var(--font-weight-medium);
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      background-color: var(--bg-secondary);
      border-bottom: 1px solid var(--border-primary);
    }
    
    .admin-table td {
      padding: var(--space-4) var(--space-6);
      font-size: var(--text-sm);
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-primary);
    }
    
    .admin-table tbody tr:hover {
      background-color: var(--surface-hover);
    }
    
    .admin-table tbody tr:last-child td {
      border-bottom: none;
    }
    
    /* ç»Ÿè®¡å¡ç‰‡ */
    .stat-card {
      background-color: var(--bg-elevated);
      border: 1px solid var(--border-primary);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      transition: box-shadow var(--duration-200) var(--easing-standard);
    }
    
    .stat-card:hover {
      box-shadow: var(--shadow-md);
    }
    
    .stat-card-icon {
      width: var(--space-12);
      height: var(--space-12);
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--text-xl);
    }
  </style>
  
  <!-- ç§»åŠ¨ç«¯ä¼˜åŒ– -->
  <script src="/js/mobile-optimizer.js"></script>
  
  <!-- å…¨å±€JavaScript -->
  <script>
    // ä¸»é¢˜åˆ‡æ¢
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    
    function updateThemeIcon() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      themeIcon.className = currentTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
    }
    
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon();
    }
    
    updateThemeIcon();
    themeToggle?.addEventListener('click', toggleTheme);
    
    // ç”¨æˆ·èœå•
    const userMenuBtn = document.getElementById('user-menu-btn');
    const userDropdown = document.getElementById('user-dropdown');
    
    userMenuBtn?.addEventListener('click', (e) => {
      e.stopPropagation();
      userDropdown.classList.toggle('hidden');
    });
    
    document.addEventListener('click', () => {
      userDropdown?.classList.add('hidden');
    });
    
    // ç§»åŠ¨ç«¯èœå•
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileSidebar = document.getElementById('mobile-sidebar');
    const mobileOverlay = document.getElementById('mobile-overlay');
    
    function toggleMobileMenu() {
      const isOpen = !mobileSidebar.classList.contains('-translate-x-full');
      
      if (isOpen) {
        mobileSidebar.classList.add('-translate-x-full');
        mobileOverlay.classList.add('hidden');
      } else {
        mobileSidebar.classList.remove('-translate-x-full');
        mobileOverlay.classList.remove('hidden');
      }
    }
    
    mobileMenuBtn?.addEventListener('click', toggleMobileMenu);
    mobileOverlay?.addEventListener('click', toggleMobileMenu);
    
    // å…¨å±€å·¥å…·å‡½æ•°
    window.AdminUtils = {
      showToast(message, type = 'info', duration = 5000) {
        const container = document.getElementById('toast-container');
        if (!container) return;
        
        const toast = document.createElement('div');
        toast.className = 'toast toast-' + type;
        
        const iconMap = {
          success: 'fas fa-check',
          error: 'fas fa-times',
          warning: 'fas fa-exclamation-triangle',
          info: 'fas fa-info-circle'
        };
        
        toast.innerHTML = 
          '<div class="toast-icon">' +
            '<i class="' + (iconMap[type] || iconMap.info) + '"></i>' +
          '</div>' +
          '<div class="toast-content">' +
            '<p class="toast-message">' + message + '</p>' +
          '</div>' +
          '<button class="toast-close" onclick="this.parentElement.remove()">' +
            '<i class="fas fa-times text-xs"></i>' +
          '</button>';
        
        container.appendChild(toast);
        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => toast.remove(), 300);
        }, duration);
      },
      
      async copyToClipboard(text) {
        try {
          await navigator.clipboard.writeText(text);
          this.showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
          return true;
        } catch (err) {
          this.showToast('å¤åˆ¶å¤±è´¥', 'error');
          return false;
        }
      }
    };
    
    // é¡µé¢ç‰¹å®šåŠŸèƒ½
    function copyPageUrl(pageId) {
      const url = window.location.origin + '/view/' + pageId;
      AdminUtils.copyToClipboard(url);
    }
  </script>
</body>
</html> 